<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <link rel="shortcut icon" href="../../img/file/icon.ico" /> <meta name="description" content="Blogging useful linux tips"> <link rel="canonical" href="https://wifiextender.github.io/"> <meta name="author" content="Aaron"> <title>Install Owncloud in CentOS (version 2)</title> <link href="../../css/template-3/bootstrap-min.css" rel="stylesheet"> </head> <body> <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"> <div class="container"> <div class="navbar-header"> <a class="navbar-brand" href="../../index.html">Home</a> <a class="navbar-brand" href="../../archive.html">Archive</a> </div> </div> </nav> <div class="container"> <div class="row"> <div class="col-lg-8"> <div class="panel panel-primary"> <div class="panel-body"><h1>Install Owncloud in CentOS (version 2)</h1><div class="date-left"><span class="label label-default">2014-05-24 Author: Aaron</span></div><div class="articleline2"></div><br /><br /><p>It's been a year since I posted owncloud installation in CentOS with Nginx and PostgreSQL.</p><p>In this post I'll focus in making the deployment easier by using Apache and MariaDB.</p><p>Let's begin with disabling the SELinux first.</p><p><code>vi /etc/sysconfing/selinux</code></p><pre><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> SELINUX=disabled</pre><p>Press the Escape button and then type <code>:wq</code> to save the changes and close the text editor. Now <code>reboot</code> the computer.</p><p>Add the MariaDB repository in order to replace the older and slower MySucksQueryLanguage err MySQL.</p><p><code>vi /etc/yum.repos.d/MariaDB.repo</code></p><pre><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> [mariadb]<p><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> name = MariaDB</p><p><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> baseurl = http://yum.mariadb.org/5.5/centos6-x86</p><p><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB</p><p><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> gpgcheck=1</p></pre><p>Update the repositories <code>yum update</code> and then install MariaDB client and server.</p><pre><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> yum install MariaDB-client MariaDB-server</pre><p>Start the MariaDB service and add it to system startup services with chkconfig.</p><pre><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> service mysql start<p><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> chkconfig mysql on</p></pre><p>Secure MariaDB</p><pre><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> mysql_secure_installation</pre><p>When asked <strong>Y/n</strong> type y to all questions. Restart the database:</p><pre><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> service mysql restart</pre><p>Install the following libraries in order to satisfy the OwnCloud requirements.</p><pre><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> yum install wget php httpd php-curl php-mysql php-zip sqlite php-dom php-gd php-pdo php-mbstring php-xml php-json</pre><p>Download the OwnCloud archive.</p><pre><code2 style="font-weight: bold; color: rgb(42,159,214);">$</code2> wget http://download.owncloud.org/community/owncloud-6.0.3.tar.bz2</pre><p>Extract the archive, delete all content in /var/www/ and move the extracted content from owncloud archive there and 'chown' it.</p><pre><code2 style="font-weight: bold; color: rgb(42,159,214);">$</code2> tar xjf owncloud-6.0.3.tar.bz2<p><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> rm -rf /var/www/*</p><p><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> mv owncloud /var/www/</p><p><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> chown -R apache.apache /var/www/owncloud</p><p><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> chmod 755 /var/www/owncloud/config/</p></pre><p>Edit the Apache configuration and add your server internal ip and/or domain name, add the owncloud path and AllowOverride.</p><p><code>vi /etc/httpd/conf/httpd.conf</code></p><pre># type /DocumentRoot to perform a search about the given string<p>DocumentRoot "/var/www/owncloud"</p><p># Search for /ServerName,  it should be below "ServerAdmin root@localhost"</p><p>ServerName 10.10.10.105 # internal ip or domain name</p><p># /AllowOverride</p><p>AllowOverride All</p><p># Save and close the file</p></pre><p>Start the Apache webserver and add it to system startup services with chkconfig.</p><pre><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> service httpd start<p><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> chkconfig httpd on</p></pre><p>Create new database.</p><pre>mysql -u root -p<p># enter the following content</p><p>create database clouddb;</p><p>grant all on clouddb.* to 'clouduser'@'localhost' identified by 'password';</p><p>flush privileges;</p><p>exit;</p></pre><p>Allow incomming tcp connections to port 80, which is used to serve the owncloud page by Apache on this port.</p><pre><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> iptables -I INPUT 4 -p tcp -d 10.10.10.105 --dport 80 -j ACCEPT<p><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> service iptables save</p><p><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> service iptables restart</p></pre><p>Open up your favourite web browser and navigate to your internal server ip or domain name that you have specified in apache's configuration file earlier.</p><img src="https://wifiextender.github.io/img/file/centos_owncloudv2/centos-owncloud-v2.png" alt="" /><br /><img src="https://wifiextender.github.io/img/file/centos_owncloudv2/centos-owncloud-v2-2.png" alt="" /><br /><img src="https://wifiextender.github.io/img/file/centos_owncloudv2/centos-owncloud-v2-3.png" alt="" /><p>Here is my small intel dual core, 4GB, CentOS 6.5 server with OwnCloud and Bittorrent Sync installed.</p><p>Having that said, next post will cover Bittorrent Sync installation and management.</p><img src="https://wifiextender.github.io/img/file/centos_owncloudv2/my-server.jpg" alt="" /><br /><img src="https://wifiextender.github.io/img/file/centos_owncloudv2/my-server-2.jpg" alt="" /><br /><img src="https://wifiextender.github.io/img/file/centos_owncloudv2/my-server-3.jpg" alt="" /><br /> </div></div></div> <div class="col-lg-4"> <div class="panel panel-primary"><div class="panel-heading"><h3 class="panel-title">Popular Tags</h3></div><div class="panel-body"><div id="popular_tagz"></div></div></div> <div class="list-group"><div class="panel panel-primary"><div class="panel-heading"><h3 class="panel-title">Recent Posts</h3></div><div id="recent_poztz"></div></div></div>  </div> </div> <footer> <div class="row"> <div class="col-lg-12"> Powered by <a href="https://github.com/wifiextender/blogfy" target="_blank">Python</a>, <a href="javascript: void(0);" onclick="showOS();">OS test</a> </div> </div> </footer> </div> <script src="../../css/js/scr.js" async></script>  </body> </html>
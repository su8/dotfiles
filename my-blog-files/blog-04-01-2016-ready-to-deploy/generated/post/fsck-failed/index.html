<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <link rel="shortcut icon" href="../../img/file/icon.ico" /> <meta name="description" content="Blogging useful linux tips"> <link rel="canonical" href="https://wifiextender.github.io/"> <meta name="author" content="Aaron"> <title>OpenBSD - fsck failed</title> <link href="../../css/template-3/bootstrap-min.css" rel="stylesheet"> </head> <body> <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"> <div class="container"> <div class="navbar-header"> <a class="navbar-brand" href="../../index.html">Home</a> <a class="navbar-brand" href="../../archive.html">Archive</a> </div> </div> </nav> <div class="container"> <div class="row"> <div class="col-lg-8"> <div class="panel panel-primary"> <div class="panel-body"><h1>OpenBSD - fsck failed</h1><div class="date-left"><span class="label label-default">2014-06-14 Author: Aaron</span></div><div class="articleline2"></div><br /><br /><p>Replaced my CentOS DNS server with OpenBSD because this BSD derivative has a priority to be secure - all of it's code and packages are <strong>audited</strong>.</p><p>I like how bare bone it is, reminds of Arch and in same time the package naming is same as in CentOS.</p><p>OpenBSD recommends to install <strong>packages</strong> over the usage of <strong>ports</strong>, so in order to start using the <strong>pkg_*</strong> tools you should add the main ftp mirror to your root profile which will allow all system users to use the <strong>pkg_*</strong> tools.</p><pre><code2 style="font-weight: bold; color: rgb(42,159,214);">$</code2> echo export PKG_PATH=ftp://ftp.openbsd.org/pub/OpenBSD/`uname -r`/packages/`machine -a`/ >> ~/.profile</pre><p>I find it really strange that OpenBSD doesn't have a <strong>search</strong> tool (except the ports) and we are left to invent our own solutions.</p><p>Installed OpenBSD with 2GB of ram, and saw it is not that ram hungry as centos, so removed 3x512MB modules and left the server with only 512MB of ram.</p><p>And here the problem came while booting - it tried to examine the system changes and repair the system configuration, but <strong>fsck failed</strong></p><p>Tried to remount it as <strong>rw</strong> but it said 'device is busy'. After that spent nearly one hour in the search engines without any clue how to fix this issue.</p><p>Later on, a friend of mine told me to try fsck in live cd. I have a nice leather cd case and choosed the live cd with Tails.</p><p>When it booted, unmounted the OpenBSD partition and ran fsck to "Check for bad blocks and add them to the badblock list".</p><pre><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> umount /dev/sdX<p><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> fsck -cf /dev/sdX</p></pre><p>Wait a while and once it's done reboot the server and have fun :}</p> </div></div></div> <div class="col-lg-4"> <div class="panel panel-primary"><div class="panel-heading"><h3 class="panel-title">Popular Tags</h3></div><div class="panel-body"><div id="popular_tagz"></div></div></div> <div class="list-group"><div class="panel panel-primary"><div class="panel-heading"><h3 class="panel-title">Recent Posts</h3></div><div id="recent_poztz"></div></div></div>  </div> </div> <footer> <div class="row"> <div class="col-lg-12"> Powered by <a href="https://github.com/wifiextender/blogfy" target="_blank">Python</a>, <a href="javascript: void(0);" onclick="showOS();">OS test</a> </div> </div> </footer> </div> <script src="../../css/js/scr.js" async></script>  </body> </html>
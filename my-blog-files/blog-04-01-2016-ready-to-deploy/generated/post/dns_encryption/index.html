<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <link rel="shortcut icon" href="../../img/file/icon.ico" /> <meta name="description" content="Blogging useful linux tips"> <link rel="canonical" href="https://wifiextender.github.io/"> <meta name="author" content="Aaron"> <title>DNS encryption</title> <link href="../../css/template-3/bootstrap-min.css" rel="stylesheet"> </head> <body> <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation"> <div class="container"> <div class="navbar-header"> <a class="navbar-brand" href="../../index.html">Home</a> <a class="navbar-brand" href="../../archive.html">Archive</a> </div> </div> </nav> <div class="container"> <div class="row"> <div class="col-lg-8"> <div class="panel panel-primary"> <div class="panel-body"><h1>DNS encryption</h1><div class="date-left"><span class="label label-default">2015-03-12 Author: Aaron</span></div><div class="articleline2"></div><br /><br /><p>Just found out that DNSCrypt can be used without OpenDNS.</p><p>Let's dive into the DNS encryption configuration.</p><p>In <strong>/etc/resolv-dnsmasq.conf</strong> add:</p><pre><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> nameserver 127.0.0.2</pre><p>Open up <strong>/etc/dnsmasq.conf</strong> and append:</p><pre><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> resolv-file=/etc/resolv-dnsmasq.conf</pre><p>Install <code>libsodium</code>.</p><p>Now <a href="http://download.dnscrypt.org/dnscrypt-proxy/" target="_blank">download</a> the latest DNSCrypt version, extract the archive with <code>tar -vxf dns*</code>, <strong>cd</strong> into the newly created folder, compile and install it with:</p><pre><code2 style="font-weight: bold; color: rgb(42,159,214);">$</code2> ./configure --prefix=/usr<p><code2 style="font-weight: bold; color: rgb(42,159,214);">$</code2> make</p><p><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> sudo make install</p></pre><p>Go to the opennicproject DNSCrypt <a href="http://meo.ws/dnsrec.php" target="_blank">page</a> and choose the server that is closer to your country - it should be the same IP that is present in <code>/etc/resolv.conf</code>. I'll use some random one. Now start the dnscrypt program with the selected server:</p><pre><code2 style="font-weight: bold; color: rgb(239,41,41);">#</code2> dnscrypt-proxy --provider-key=1F92:37B2:4083:D058:E871:615B:59C7:3E28:EC54:FC4E:231D:017B:DA02:A532:6AF2:72BE --provider-name=2.fvz-rec-de-dus-01.dnscrypt-cert.meo.ws --resolver-address=62.141.38.230:443 --local-address=127.0.0.2:53 --user=nobody --daemonize</pre><p>127.0.0.<strong>1</strong> is used by dnsmasq while 127.0.0.<strong>2</strong> will be used by DNSCrypt, so make sure to type 2 and not 1.</p><p>My ISP is intentionally slowing all of the arch mirrors (<a href="https://wiki.archlinux.org/index.php/Mirrors#List_by_speed" target="_blank">despite my attempts</a>) whenever I try to upgrade my system. I never would have thought that dnscrypt would bypass bandwidth throttling, but it did; viva dnscrypt !</p><p>Now I know that my ISP is filtering the packets and has some pattern matching algorithms. At least I have clue, so a couple levels of OpenBSD firewalls and Tor routers will be installed right now. Tor router -> OpenBSD firewall -> Tor Bundle on every personal computer at home. I'll have to buy another 16 port switch and 12 NICs. My whole weekend will be true madness.</p> </div></div></div> <div class="col-lg-4"> <div class="panel panel-primary"><div class="panel-heading"><h3 class="panel-title">Popular Tags</h3></div><div class="panel-body"><div id="popular_tagz"></div></div></div> <div class="list-group"><div class="panel panel-primary"><div class="panel-heading"><h3 class="panel-title">Recent Posts</h3></div><div id="recent_poztz"></div></div></div>  </div> </div> <footer> <div class="row"> <div class="col-lg-12"> Powered by <a href="https://github.com/wifiextender/blogfy" target="_blank">Python</a>, <a href="javascript: void(0);" onclick="showOS();">OS test</a> </div> </div> </footer> </div> <script src="../../css/js/scr.js" async></script>  </body> </html>